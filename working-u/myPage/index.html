<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MY PAGE | WORKING U</title>
    <link rel="stylesheet" href="../workingU.css" />
    <!-- ".." to specify correct file path -->
  </head>
  <body>
    <nav class="flex">
      <div class="logo">
        <h2>Working U</h2>
      </div>
      <div class="profile-picture">
        <p>Hi,<span id="account-name"></span></p>
        <img />
      </div>
    </nav>
    <main class="flex">
      <div id="side-bar" class="col-2">
        <div id="side-bar-1">
          <p>Dashboard</p>
          <p class="active active-background">My Page</p>
          <p>My Task</p>
          <p>Generate Plans using AI</p>
        </div>
        <div id="side-bar-2">
          <p>Manage Plan Receivers</p>
          <p>Manage Tasks</p>
          <p>Manage Request for Parental leave</p>
          <p>Manage Task Masters</p>
          <p>Manage Business Info</p>
        </div>
      </div>
      <div id="content-section" class="col-10">
        <h1 id="page-title">My Page</h1>
        <div id="intro" class="grid">
          <div>
            <div class="flex">
              <img />
              <h2>Account Name</h2>
              <span id="account-tag" class="flex center">Already Reported</span>
            </div>
            <div id="expected-birthday" class="flex space">
              <p>Expected Birthday</p>
              <p>|</p>
              <p>2024/12/25</p>
            </div>
          </div>
          <div id="modal-btns">
            <div class="flex flex-end">
              <button id="give-birth-btn" type="button">
                Giving Birth Report
              </button>

              <!-- Modal 1 -->
              <div id="birth-report-modal" class="modal">
                <div id="modal-1" class="modal-content">
                  <!-- Modal Header -->
                  <span class="close-modal">&times;</span>
                  <div id="modal-1-header" class="center">
                    <h2>Birth Report</h2>
                    <span>Please register the Birth Date</span>
                  </div>
                  <!-- Modal Content -->
                  <div id="modal-1-content">
                    <label for="birth-date">Birth Date</label
                    ><span class="required">*</span>
                    <br />
                    <input
                      required
                      id="birth-date"
                      type="date"
                      placeholder="Choose Date"
                    />
                    <br />
                    <label>Parental Leave Desire</label
                    ><span class="required">*</span>
                    <br />
                    <input
                      required
                      type="radio"
                      id="leave-yes"
                      name="leave-desire"
                      checked="checked"
                      value="yes"
                    />
                    <label for="leave-yes">Yes</label>
                    <input
                      required
                      type="radio"
                      id="leave-no"
                      name="leave-desire"
                      value="no"
                    />
                    <label for="leave-no">No</label>
                  </div>
                  <!-- Modal Footer -->
                  <div id="modal-1-footer" class="grid">
                    <button class="cancel-btn" type="button">Cancel</button>
                    <button class="submit-btn" type="button">Report</button>
                  </div>
                </div>
              </div>

              <button id="register-parental-btn" type="button">
                Register Parental Info
              </button>

              <div class="tooltip">
                <button id="stop-leave-btn" type="button">...</button>
                <span class="tooltiptext"
                  >For user who has not given birth</span
                >
              </div>
            </div>
            <div id="see-task-list-text" class="flex flex-end">
              <p>See task list ></p>
            </div>
          </div>
        </div>
        <div id="dynamic-section-1">
          <nav id="mini-navbar" class="flex flex-start">
            <span id="basic-info" class="active">Basic Info</span>
            <span id="wage-info">Wage Info</span>
            <span id="family-info">Family and Partner Info</span>
            <span id="parental-leave-info">Parental Leave Info</span>
            <span id="account-settings">Account Settings</span>
            <div
              id="mini-navbar-animation"
              class="animation start-basic-info"
            ></div>
          </nav>
          <div id="dynamic-content"></div>
        </div>
      </div>
    </main>
  </body>
  <script defer>
    const dynamicContentSection = document.getElementById("dynamic-content");
    const basicInfo = document.getElementById("basic-info");
    const wageInfo = document.getElementById("wage-info");
    const familyInfo = document.getElementById("family-info");
    const parentalLeaveInfo = document.getElementById("parental-leave-info");
    const accountSettings = document.getElementById("account-settings");

    const birthReportModal = document.getElementById("birth-report-modal");
    const birthReportModalContent = document.getElementById("modal-1");
    const birthReportBtn = document.getElementById("give-birth-btn");
    const closeModalBtn = document.getElementsByClassName("close-modal")[0];

    const cancelBtn = document.getElementsByClassName("cancel-btn")[0];

    const miniNavbarAnimation = document.getElementById(
      "mini-navbar-animation"
    );

    const navItems = [
      basicInfo,
      wageInfo,
      familyInfo,
      parentalLeaveInfo,
      accountSettings,
    ];

    // Modal
    const displayModal = () => {
      birthReportModal.classList.add("show");
      birthReportModalContent.style.animation = "zoomIn 0.5s forwards";
      birthReportModal.style.display = "block";
    };

    const closeModal = () => {
      birthReportModalContent.style.animation = "zoomOut 0.5s forwards";
      setTimeout(() => {
        birthReportModal.style.display = "none";
      }, 500); // Match the duration of the animation
    };

    birthReportBtn.addEventListener("click", displayModal);
    [closeModalBtn, cancelBtn].forEach((btn) =>
      btn.addEventListener("click", closeModal)
    );
    window.addEventListener("click", (e) => {
      if (e.target === birthReportModal) {
        closeModal();
      }
    });

    // 1st tab

    const createBasicInfoContent = () => {
      const basicInfoItems = [
        "Employee Number",
        "Employee Name",
        "Department",
        "Role",
        "Type of Employment",
        "Gender",
        "Date of Birth",
      ];

      const basicInfoContent = document.createElement("div");
      basicInfoContent.setAttribute("id", "basic-info-content");
      basicInfoContent.innerHTML = [...Array(7).keys()].reduce(
        (prev, current, idx) => {
          return (
            prev +
            `<label>${basicInfoItems[idx]}</label><br><fieldset></fieldset>`
          );
        },
        ""
      );
      dynamicContentSection.appendChild(basicInfoContent);

      navItems.forEach((item) => {
        item.addEventListener("click", () => {
          navItems.forEach((nav) => nav.classList.remove("active"));
          item.classList.add("active");
        });
      });
    };
    createBasicInfoContent();

    basicInfo.addEventListener("click", () => {
      dynamicContentSection.textContent = "";
      createBasicInfoContent();

      miniNavbarAnimation.style.width = "10rem";
      miniNavbarAnimation.style.left = "0";
      miniNavbarAnimation.style.transition = "0.2s";
    });

    // 2nd tab
    wageInfo.addEventListener("click", () => {
      dynamicContentSection.textContent = "";
      const wageInfoItems = ["Wage (Monthly)"];
      const wageInfoContent = document.createElement("div");
      wageInfoContent.setAttribute("id", "wage-info-content");
      wageInfoContent.innerHTML = `<label>${wageInfoItems}</label><br><fieldset></fieldset>`;
      dynamicContentSection.appendChild(wageInfoContent);

      miniNavbarAnimation.style.width = "8rem";
      miniNavbarAnimation.style.left = "12rem";
      miniNavbarAnimation.style.transition = "0.2s";
    });

    // 3rd tab
    familyInfo.addEventListener("click", () => {
      dynamicContentSection.textContent = "";
      const familyInfoItems = [
        "Number of Dependents",
        "Numnber of Children",
        "Family Address",
        "Name of Spouse",
        "Date of Birth of Spouse",
        "Employment Status of Spouse",
        "Salary of Spouse",
      ];
      const familyInfoContent = document.createElement("div");
      familyInfoContent.setAttribute("id", "family-info-content");
      familyInfoContent.innerHTML = [...Array(7).keys()].reduce(
        (prev, current, idx) => {
          return (
            prev +
            `<label>${familyInfoItems[idx]}</label><br><fieldset></fieldset>`
          );
        },
        ""
      );
      dynamicContentSection.appendChild(familyInfoContent);

      miniNavbarAnimation.style.width = "17rem";
      miniNavbarAnimation.style.left = "22.5rem";
      miniNavbarAnimation.style.transition = "0.2s";
    });

    // 4th tab
    parentalLeaveInfo.addEventListener("click", () => {
      dynamicContentSection.textContent = "";
      const parentalLeaveItems = [
        "Receiving Leave Desire",
        "Address for Leaving Period",
        "Date of Expiry of Address for Leaving Period",
        "Contact of Address for Leaving Period",
      ];
      const parentalLeaveContent = document.createElement("div");
      parentalLeaveContent.setAttribute("id", "parental-leave-content");
      parentalLeaveContent.innerHTML = [...Array(4).keys()].reduce(
        (prev, current, idx) => {
          return (
            prev +
            `<label>${parentalLeaveItems[idx]}</label><br><fieldset></fieldset>`
          );
        },
        ""
      );
      dynamicContentSection.appendChild(parentalLeaveContent);

      miniNavbarAnimation.style.width = "13.5rem";
      miniNavbarAnimation.style.left = "42rem";
      miniNavbarAnimation.style.transition = "0.2s";
    });

    // 5th tab
    accountSettings.addEventListener("click", () => {
      dynamicContentSection.textContent = "";
      const accountSettingsItems = ["Mail Address", "Password"];
      const accountSettingsContent = document.createElement("div");
      accountSettingsContent.setAttribute("id", "account-settings-content");
      accountSettingsContent.innerHTML = `<label>${accountSettingsItems[0]}</label>
      <br>
      <span>This account is being registered by this Email Address:</span>
      <label>${accountSettingsItems[1]}</label><br>
      <span>Change your Password</span>`;

      dynamicContentSection.appendChild(accountSettingsContent);

      miniNavbarAnimation.style.width = "11.5rem";
      miniNavbarAnimation.style.left = "59rem";
      miniNavbarAnimation.style.transition = "0.2s";
    });
  </script>
</html>
